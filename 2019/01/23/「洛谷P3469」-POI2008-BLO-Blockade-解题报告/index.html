<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>「洛谷P3469」[POI2008]BLO-Blockade 解题报告 | Hello,I am louhc</title>
  <meta name="author" content="louhc">
  
  <meta name="description" content="P3469[POI2008]LO-Blockade题意翻译在Byteotia有n个城镇。 一些城镇之间由无向边连接。 在城镇外没有十字路口，尽管可能有桥，隧道或者高架公路（反正不考虑这些）。每两个城镇之间至多只有一条直接连接的道路。人们可以从任意一个城镇直接或间接到达另一个城镇。 每个城镇都有一个公民，他们被孤独所困扰。事实证明，每个公民都想拜访其他所有公民一次（在主人所在的城镇）。所以，一共会有n*（n-1）次拜访。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="「洛谷P3469」[POI2008]BLO-Blockade 解题报告">
  <meta property="og:site_name" content="Hello,I am louhc">

  
    <meta property="og:image" content="">
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Hello,I am louhc" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>
</html>

<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Hello,I am louhc</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2019-01-23T00:11:22.000Z"><a href="/2019/01/23/「洛谷P3469」-POI2008-BLO-Blockade-解题报告/">2019-01-23</a></time>
      
      
  
    <h1 class="title">「洛谷P3469」[POI2008]BLO-Blockade 解题报告</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="P3469-POI2008-LO-Blockade"><a href="#P3469-POI2008-LO-Blockade" class="headerlink" title="P3469[POI2008]LO-Blockade"></a><a href="https://www.luogu.org/problemnew/show/P3469" target="_blank" rel="noopener">P3469[POI2008]LO-Blockade</a></h1><h2 id="题意翻译"><a href="#题意翻译" class="headerlink" title="题意翻译"></a>题意翻译</h2><p>在Byteotia有n个城镇。 一些城镇之间由无向边连接。 在城镇外没有十字路口，尽管可能有桥，隧道或者高架公路（反正不考虑这些）。每两个城镇之间至多只有一条直接连接的道路。人们可以从任意一个城镇直接或间接到达另一个城镇。 每个城镇都有一个公民，他们被孤独所困扰。事实证明，每个公民都想拜访其他所有公民一次（在主人所在的城镇）。所以，一共会有n*（n-1）次拜访。</p>
<a id="more"></a>
<p>不幸的是，一个程序员总罢工正在进行中，那些程序员迫切要求购买某个软件。</p>
<p>作为抗议行动，程序员们计划封锁一些城镇，阻止人们进入，离开或者路过那里。</p>
<p>正如我们所说，他们正在讨论选择哪些城镇会导致最严重的后果。</p>
<p>编写一个程序：</p>
<p>读入Byteotia的道路系统，对于每个被决定的城镇，如果它被封锁，有多少访问不会发生，输出结果。</p>
<h2 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h2><p>第一行读入n，m，分别是城镇数目和道路数目</p>
<p>城镇编号1~n</p>
<p>接下来m行每行两个数字a,b，表示a和b之间有有一条无向边</p>
<p>输出n行，每行一个数字，为第i个城镇被锁时不能发生的访问的数量。</p>
<h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>There are exactly nn towns in Byteotia.</p>
<p>Some towns are connected by bidirectional roads.</p>
<p>There are no crossroads outside towns, though there may be bridges, tunnels and flyovers. Each pair of towns may be connected by at most one direct road. One can get from any town to any other-directly or indirectly.</p>
<p>Each town has exactly one citizen.</p>
<p>For that reason the citizens suffer from loneliness.</p>
<p>It turns out that each citizen would like to pay a visit to every other citizen (in his host’s hometown), and do it exactly once. So exactly n\cdot (n-1)n⋅(n−1) visits should take place.</p>
<p>That’s right, should.</p>
<p>Unfortunately, a general strike of programmers, who demand an emergency purchase of software, is under way.</p>
<p>As an act of protest, the programmers plan to block one town of Byteotia, preventing entering it, leaving it, and even passing through.</p>
<p>As we speak, they are debating which town to choose so that the consequences are most severe.</p>
<p>Task Write a programme that:</p>
<p>reads the Byteotian road system’s description from the standard input, for each town determines, how many visits could take place if this town were not blocked by programmers, writes out the outcome to the standard output.</p>
<p>给定一张无向图，求每个点被封锁之后有多少个有序点对(x,y)(x!=y,1&lt;=x,y&lt;=n)满足x无法到达y</p>
<h2 id="输入输出格式-1"><a href="#输入输出格式-1" class="headerlink" title="输入输出格式"></a>输入输出格式</h2><h3 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h3><p>In the first line of the standard input there are two positive integers: $n$ and $m$ ($1\le n\le 100000, 1\le m\le 500000$ )denoting the number of towns and roads, respectively.</p>
<p>The towns are numbered from 1 to $n$.</p>
<p>The following mm lines contain descriptions of the roads.</p>
<p>Each line contains two integers $a$ and $b$ ($1\le a&lt; b\le n$) and denotes a direct road between towns numbered $a$ and $b$.</p>
<h3 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h3><p>Your programme should write out exactly nn integers to the standard output, one number per line. The i^{th}ithline should contain the number of visits that could not take place if the programmers blocked the town no. $i$</p>
<h2 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h2><h3 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5 5</span><br><span class="line">1 2</span><br><span class="line">2 3</span><br><span class="line">1 3</span><br><span class="line">3 4</span><br><span class="line">4 5</span><br></pre></td></tr></table></figure>
<h3 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">8</span><br><span class="line">8</span><br><span class="line">16</span><br><span class="line">14</span><br><span class="line">8</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h1><p>Tarjan找割点</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><blockquote>
<p>I.设在搜索树T中以x为根的树包含的点集为SubTree(x)。</p>
<p>II.这里去除割点可以理解为删除与该点相连的所有边。</p>
<p>III.这里提到的连通块是指当某一割点去除时：1.其中任何两个点都能相互到达 2.没有更大的连通块包含该块 当然，根据II，我们把单独的X也看做一个连通块</p>
<p>IV.为了方便，我们直接将(x,y)(满足x不能到y)成为“点对”</p>
<p>V. ~S：S的补集，A^B：在A中不包括点B的所有点构成的集合</p>
</blockquote>
<p>利用Tarjan查找割点的同时，我们可以找出该割点X去除后剩余的连通块（有两种情况，一种是在SubTree(X)^X中，另一种是~SubTree(X)）。</p>
<p>只要能够理解割点的求解过程，这还是很好理解的，这里不再赘述。</p>
<p>然后要求“点对”。</p>
<p>对于一个点X，不管是否为割点，点对(i,j)为“点对”，当且仅当</p>
<blockquote>
<p>i != j且i、j属于两个不同的连通块</p>
</blockquote>
<p>根据定义，很容易证明这个推论。</p>
<p>代码有多种写法，这里选取<strong>我能想到的</strong>最简单的写法。</p>
<p>在枚举连通块时，ans加上<code>s[to[i]] * ( n - s[to[i]] )</code>，即一次性处理一个连通块的所有点，它们与其他不属于这个连通块的点都构成“点对”。当然，别忘了X与~SubTree(X)。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 100005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXM 1000005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> hd[MAXN], nxt[MAXM], to[MAXM], tot;</span><br><span class="line"><span class="keyword">int</span> dfn[MAXN], low[MAXN], root, num;</span><br><span class="line">LL ans[MAXN];</span><br><span class="line"><span class="keyword">int</span> s[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">( <span class="keyword">int</span> x, <span class="keyword">int</span> y )</span></span>&#123; nxt[++tot] = hd[x]; hd[x] = tot; to[tot] = y; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">( <span class="keyword">int</span> x )</span></span>&#123;</span><br><span class="line">	s[x] = <span class="number">1</span>;</span><br><span class="line">	low[x] = dfn[x] = ++num;</span><br><span class="line">	<span class="function">LL <span class="title">b</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span> ( <span class="keyword">int</span> i = hd[x]; i; i = nxt[i] )&#123;</span><br><span class="line">		<span class="keyword">if</span> ( !dfn[to[i]] )&#123;</span><br><span class="line">			DFS( to[i] ); s[x] += s[to[i]];</span><br><span class="line">			low[x] = min( low[x], low[to[i]] );</span><br><span class="line">			<span class="keyword">if</span> ( dfn[x] &lt;= low[to[i]] ) ans[x] += (<span class="keyword">long</span> <span class="keyword">long</span>)s[to[i]] * ( n - s[to[i]] ), b += s[to[i]];<span class="comment">//发现新的连通块！</span></span><br><span class="line">		&#125; <span class="keyword">else</span> low[x] = min( low[x], dfn[to[i]] );</span><br><span class="line">	&#125;</span><br><span class="line">	ans[x] += (<span class="keyword">long</span> <span class="keyword">long</span>)( n - b - <span class="number">1</span> ) * ( b + <span class="number">1</span> ) + ( n - <span class="number">1</span> );<span class="comment">//算上~SubTree(X)与X</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>( <span class="string">"%d%d"</span>, &amp;n, &amp;m );</span><br><span class="line">	<span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i )&#123;</span><br><span class="line">		<span class="keyword">int</span> x, y; <span class="built_in">scanf</span>( <span class="string">"%d%d"</span>, &amp;x, &amp;y ); Add( x, y ); Add( y, x );</span><br><span class="line">	&#125;</span><br><span class="line">	DFS( <span class="number">1</span> );</span><br><span class="line">	<span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i ) <span class="built_in">printf</span>( <span class="string">"%lld\n"</span>, ans[i] );</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/割点/">割点</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="https://louhc.github.io/2019/01/23/「洛谷P3469」-POI2008-BLO-Blockade-解题报告/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:louhc.github.io">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/KMP/">KMP</a><small>1</small></li>
  
    <li><a href="/tags/NOIP/">NOIP</a><small>1</small></li>
  
    <li><a href="/tags/STL/">STL</a><small>1</small></li>
  
    <li><a href="/tags/ST表/">ST表</a><small>1</small></li>
  
    <li><a href="/tags/二分答案/">二分答案</a><small>2</small></li>
  
    <li><a href="/tags/分块/">分块</a><small>11</small></li>
  
    <li><a href="/tags/割点/">割点</a><small>2</small></li>
  
    <li><a href="/tags/博弈论/">博弈论</a><small>1</small></li>
  
    <li><a href="/tags/学习笔记/">学习笔记</a><small>6</small></li>
  
    <li><a href="/tags/并查集/">并查集</a><small>1</small></li>
  
    <li><a href="/tags/归并排序/">归并排序</a><small>1</small></li>
  
    <li><a href="/tags/技巧/">技巧</a><small>1</small></li>
  
    <li><a href="/tags/排序/">排序</a><small>1</small></li>
  
    <li><a href="/tags/搜索/">搜索</a><small>5</small></li>
  
    <li><a href="/tags/数学-数论/">数学,数论</a><small>5</small></li>
  
    <li><a href="/tags/暴力/">暴力</a><small>1</small></li>
  
    <li><a href="/tags/最短路/">最短路</a><small>2</small></li>
  
    <li><a href="/tags/期望-概率/">期望,概率</a><small>1</small></li>
  
    <li><a href="/tags/欧拉回路/">欧拉回路</a><small>1</small></li>
  
    <li><a href="/tags/水题/">水题</a><small>1</small></li>
  
    <li><a href="/tags/深搜/">深搜</a><small>1</small></li>
  
    <li><a href="/tags/神仙题/">神仙题</a><small>2</small></li>
  
    <li><a href="/tags/线性DP/">线性DP</a><small>2</small></li>
  
    <li><a href="/tags/缩点/">缩点</a><small>1</small></li>
  
    <li><a href="/tags/网络流/">网络流</a><small>7</small></li>
  
    <li><a href="/tags/背包DP/">背包DP</a><small>2</small></li>
  
    <li><a href="/tags/质数/">质数</a><small>1</small></li>
  
    <li><a href="/tags/贪心/">贪心</a><small>3</small></li>
  
    <li><a href="/tags/递推/">递推</a><small>1</small></li>
  
    <li><a href="/tags/黑科技/">黑科技</a><small>3</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2019 louhc
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!--<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>
